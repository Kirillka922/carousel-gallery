{"version":3,"file":"index.js","mappings":";;;;;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA,6CAA6C,QAAQ;AACrD;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA,iCAAiC,wBAAwB;AACzD;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;;AAEJ;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED","sources":["webpack://carousel-gallery/./src/index.js"],"sourcesContent":["const url = \"https://www.thecocktaildb.com/api/json/v1/1/random.php\";\n\nasync function fetchHandler() {\n  try {\n    const response = await fetch(url);\n    const data = await response.json();\n    return data.drinks[0].strDrinkThumb;\n  } catch (error) {\n    console.log(error);\n    return false;\n  }\n}\nfunction addLoading(elem) {\n  function createImg(className, link, cont) {\n    let img = document.createElement(\"img\");\n    img.className = className;\n    img.setAttribute(\"src\", link);\n    cont.append(img);\n  }\n  if (elem.childNodes.length > 0) {\n    elem.innerHTML = \"\";\n  }\n  createImg(\n    \"imgContainer\",\n    \"https://otkritkis.com/wp-content/uploads/2022/07/gufde.gif\",\n    elem\n  );\n}\n\nasync function addImgToCont(elem) {\n  addLoading(elem);\n\n  let link = await fetchHandler();\n  if (!link) {\n    let button = document.createElement(\"button\");\n    button.className = \"buttonReload\";\n    elem.append(button);\n    let textNode = document.createTextNode(\"Try again\");\n    button.append(textNode);\n    button.addEventListener(\"click\", addImgToCont.bind(null, elem), {\n      once: true,\n    });\n  }\n\n  elem.firstElementChild.src = link;\n}\n\nlet windowWidth = window.innerWidth / 2;\nconst DISPLACEMENT_RADIUS_X = 400;\nconst RADIUS_Y = 400;\nconst STEP_TRANSITION = 5;\nconst ALPHA_ANGLE = 2 * 3.14;\nconst SCROLL_START_POSITION = 72;\nconst START_TIME = 1304;\nconst FIX_DISTANCE_PICTURES = 60;\nconst container = document.getElementById(\"container\");\nlet RADIUSX = window.innerWidth - DISPLACEMENT_RADIUS_X;\nlet galleryContainers = null;\nlet positionNow = 0;\nlet arrayContainers = [];\nlet isFinishReplacement = false;\nlet mouseOnContainer = false;\n\nfunction addPoz(direction) {\n  container.scrollLeft = SCROLL_START_POSITION;\n\n  let lastElemLeft = null;\n  let lastElemTop = null;\n\n  function hideLastElem(elem) {\n    elem.style.display = \"none\";\n    elem.style.left = lastElemLeft;\n    elem.style.top = lastElemTop;\n\n    addImgToCont(elem);\n\n    setTimeout(() => {\n      elem.style.display = \"block\";\n      if (direction) arrayContainers.unshift(arrayContainers.pop());\n      if (!direction) arrayContainers.push(arrayContainers.shift());\n    }, 500);\n  }\n\n  if (direction) {\n    positionNow++;\n    lastElemLeft = arrayContainers[0].style.left;\n    lastElemTop = arrayContainers[0].style.top;\n    for (let i = 0; i < arrayContainers.length; i++) {\n      if (i === arrayContainers.length - 1) {\n        hideLastElem(arrayContainers[arrayContainers.length - 1]);\n      } else {\n        arrayContainers[i].style.left = arrayContainers[i + 1].style.left;\n        arrayContainers[i].style.top = arrayContainers[i + 1].style.top;\n      }\n    }\n  } else {\n    positionNow--;\n    lastElemLeft = arrayContainers[arrayContainers.length - 1].style.left;\n    lastElemTop = arrayContainers[arrayContainers.length - 1].style.top;\n\n    for (let i = arrayContainers.length - 1; i >= 0; i--) {\n      if (i === 0) {\n        hideLastElem(arrayContainers[0]);\n      } else {\n        arrayContainers[i].style.left = arrayContainers[i - 1].style.left;\n        arrayContainers[i].style.top = arrayContainers[i - 1].style.top;\n      }\n    }\n  }\n\n  isFinishReplacement = false;\n}\n\nfunction printContainers(isResize = false) {\n  container.scrollLeft = SCROLL_START_POSITION;\n  const arrayCords = createArrayCords(isResize);\n\n  arrayContainers.forEach((object, i) => {\n    arrayCords[i] = arrayCords[i] - STEP_TRANSITION;\n    object.style.width = `${\n      window.innerWidth / (arrayContainers.length + 1)\n    }px`;\n    object.style.height = `${\n      window.innerWidth / (arrayContainers.length + 1) / 1.5\n    }px`;\n    object.style.left = `${\n      windowWidth + RADIUSX * Math.cos(ALPHA_ANGLE * arrayCords[i])\n    }px`;\n    object.style.top = `${\n      RADIUS_Y + RADIUS_Y * Math.sin(-ALPHA_ANGLE * arrayCords[i])\n    }px`;\n    if (!isResize) addImgToCont(object);\n  });\n\n  let volumeElement = container.querySelector(\".volumeElem\");\n  volumeElement.style.width = `${window.innerWidth + 100}px`;\n}\n\nfunction createArrayCords(isResize) {\n  if (galleryContainers === null) {\n    galleryContainers = container.querySelectorAll(\".element\");\n  }\n\n  const arrayCords = [];\n\n  galleryContainers.forEach((elem, i) => {\n    arrayCords[i] = [START_TIME + i * FIX_DISTANCE_PICTURES];\n    if (!isResize) arrayContainers[i] = elem;\n  });\n\n  return arrayCords;\n}\n\ncontainer.addEventListener(\"scroll\", function () {\n  const isBack = container.scrollLeft < SCROLL_START_POSITION;\n  container.scrollLeft = SCROLL_START_POSITION;\n  if (isFinishReplacement) return;\n  if (!isBack && positionNow === 0) return;\n  if (!mouseOnContainer) return;\n  isFinishReplacement = true;\n  setTimeout(() => addPoz(isBack), 500);\n});\n\nwindow.addEventListener(\"resize\", () => {\n  if (window.innerWidth < 800) {\n    RADIUSX = 500;\n    windowWidth = 800;\n    return;\n  }\n  RADIUSX = window.innerWidth - DISPLACEMENT_RADIUS_X;\n  windowWidth = window.innerWidth / 2;\n  printContainers(true);\n});\n\ncontainer.addEventListener(\"mouseover\", function (event) {\n  if (event.relatedTarget === null) {\n    mouseOnContainer = true;\n    return;\n  }\n  if (event.target === null) {\n    mouseOnContainer = false;\n    return;\n  }\n  const isParentGallery = event.target.closest(\".galleryContainer\");\n  const isParentGalleryRel = event.relatedTarget.closest(\".galleryContainer\");\n\n  if (isParentGallery && mouseOnContainer) {\n    return;\n  } else if (isParentGallery && !mouseOnContainer) mouseOnContainer = true;\n\n  if (isParentGalleryRel && isParentGallery) return;\n});\n\ncontainer.addEventListener(\"mouseout\", function (event) {\n  if (event.relatedTarget === null) {\n    mouseOnContainer = false;\n    return;\n  }\n  const isParentGalleryRel = event.relatedTarget.closest(\".galleryContainer\");\n  const isParentGallery = event.target.closest(\".galleryContainer\");\n\n  if (isParentGallery && !isParentGalleryRel) {\n    mouseOnContainer = false;\n    return;\n  }\n  if (isParentGallery && isParentGalleryRel) return;\n});\n\nprintContainers();\n"],"names":[],"sourceRoot":""}